(()=>{"use strict";var e={744:(e,t,n)=>{var i=n(144),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("h1",[e._v("Witaj w systemie do zapisów na zajęcia")]),e.authenticatedUsername?t("div",[t("UserPanel",{attrs:{username:e.authenticatedUsername},on:{logout:function(t){return e.logMeOut()}}}),t("MeetingsPage",{attrs:{username:e.authenticatedUsername}})],1):t("div",[t("button",{class:e.signingUp?"button-outline":"",on:{click:function(t){e.signingUp=!1}}},[e._v("Logowanie")]),t("button",{class:e.signingUp?"":"button-outline",on:{click:function(t){e.signingUp=!0}}},[e._v("Rejestracja")]),e.signingUp?t("LoginForm",{attrs:{"button-label":"Załóż konto"},on:{login:t=>e.register(t)}}):t("LoginForm",{on:{login:t=>e.logMeIn(t)}}),e.message?t("div",{class:e.isError?"redAlert":"greenAlert"},[e._v(" "+e._s(e.message)+" ")]):e._e()],1)])},a=[],o=function(){var e=this,t=e._self._c;return t("form",{on:{submit:function(t){return t.preventDefault(),e.enter()}}},[t("label",[e._v("Login")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.login,expression:"user.login"}],attrs:{type:"text"},domProps:{value:e.user.login},on:{input:function(t){t.target.composing||e.$set(e.user,"login",t.target.value)}}}),t("label",[e._v("Hasło")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),t("button",{attrs:{type:"submit"}},[e._v(e._s(e.buttonLabel||"Zaloguj się"))])])},r=[];const l={props:{buttonLabel:String},data(){return{user:{}}},methods:{enter(){this.$emit("login",this.user)}}},u=l;var c=n(1),p=(0,c.Z)(u,o,r,!1,null,null,null);const g=p.exports;var d=function(){var e=this,t=e._self._c;return t("div",[t("h2",[e._v("Witaj "+e._s(e.username))]),t("a",{on:{click:function(t){return e.$emit("logout")}}},[e._v("Wyloguj")])])},m=[];const h={props:{username:String}},v=h;var f=(0,c.Z)(v,d,m,!1,null,null,null);const _=f.exports;var w=function(){var e=this,t=e._self._c;return t("div",[t("NewMeetingForm",{attrs:{meetings:e.meetings},on:{added:function(t){return e.addNewMeeting(t)}}}),0==e.meetings.length?t("span",[e._v("Brak zaplanowanych spotkań.")]):t("h3",[e._v("Zaplanowane zajęcia ("+e._s(e.meetings.length)+")")]),t("MeetingsList",{attrs:{meetings:e.meetings,username:e.username},on:{attend:function(t){return e.addMeetingParticipant(t)},unattend:function(t){return e.removeMeetingParticipant(t)},delete:function(t){return e.deleteMeeting(t)}}})],1)},b=[],M=function(){var e=this,t=e._self._c;return t("form",{on:{submit:function(t){return t.preventDefault(),e.addNewMeeting()}}},[t("h3",[e._v("Dodaj nowe spotkanie")]),t("label",[e._v("Nazwa")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newMeeting.title,expression:"newMeeting.title"}],attrs:{type:"text"},domProps:{value:e.newMeeting.title},on:{input:function(t){t.target.composing||e.$set(e.newMeeting,"title",t.target.value)}}}),t("label",[e._v("Opis")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newMeeting.description,expression:"newMeeting.description"}],domProps:{value:e.newMeeting.description},on:{input:function(t){t.target.composing||e.$set(e.newMeeting,"description",t.target.value)}}}),t("button",[e._v("Dodaj")]),e.missingTitleError?t("span",{staticClass:"error"},[e._v("Spotkanie musi mieć nazwę!")]):e._e(),e.duplicatedTitleError?t("span",{staticClass:"error"},[e._v("Spotkanie o podanej nazwie istnieje. Wprowadź inną nazwę.")]):e._e()])},k=[];const y={props:{meetings:Array},data(){return{newMeeting:{participants:[]},missingTitleError:!1,duplicatedTitleError:!1}},methods:{async addNewMeeting(){this.error=!1,this.newMeeting.title?(this.$emit("added",this.newMeeting),this.newMeeting={participants:[]}):this.error=!0}}},z=y;var x=(0,c.Z)(z,M,k,!1,null,"8ae04474",null);const Z=x.exports;var O=function(){var e=this,t=e._self._c;return e.meetings.length>0?t("table",[e._m(0),t("tbody",e._l(e.meetings,(function(n){return t("tr",{key:n.id},[t("td",[e._v(e._s(n.title))]),t("td",[e._v(e._s(n.description))]),t("td",[n.participants?t("ul",e._l(n.participants,(function(n){return t("li",{key:n},[e._v(" "+e._s(n)+" ")])})),0):e._e()]),n.participants?t("td",{staticStyle:{"text-align":"right","min-width":"400px"}},[n.participants.indexOf(e.username)<0?t("button",{staticClass:"button-outline",on:{click:function(t){return e.$emit("attend",n)}}},[e._v(" Zapisz się ")]):t("button",{staticClass:"button-outline",on:{click:function(t){return e.$emit("unattend",n)}}},[e._v("Wypisz się")]),0===n.participants.length?t("button",{staticClass:"button",on:{click:function(t){return e.$emit("delete",n)}}},[e._v(" Usuń puste spotkanie ")]):e._e()]):e._e()])})),0)]):e._e()},j=[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",[e._v("Nazwa spotkania")]),t("th",[e._v("Opis")]),t("th",[e._v("Zapisani")]),t("th",[e._v("Akcje")])])])}];const U={props:{meetings:Array,username:String}},P=U;var $=(0,c.Z)(P,O,j,!1,null,null,null);const E=$.exports;var N=n(154);const S={components:{NewMeetingForm:Z,MeetingsList:E},props:{username:String},data(){return{meetings:[],idError:!1}},created:async function(){let e=[],t=[];await N.Z.get("/api/meetings").then((n=>{e=n.data,console.log(e),e.forEach((e=>{N.Z.get("/api/meetings/"+e.id+"/participants").then((n=>{t=n.data;let i=[];t.forEach((e=>{i.push(e.login)})),e.participants=i,this.meetings.push(e)})).catch((e=>console.log(e)))}))})).catch((e=>console.log(e)))},methods:{addNewMeeting(e){null==e.description&&(e.description=""),N.Z.post("/api/meetings",e).then((t=>{e.id=t.data.id,this.meetings.push(e)})).catch((e=>console.log(e))),console.log(e)},addMeetingParticipant(e){const t=this.meetings.indexOf(e),n=this.meetings.at(t).participants;N.Z.post("/api/meetings/${meeting.id}/participants",{login:this.username}).then((e=>console.log("Dodano uczestnika do spotkania"))).catch((e=>console.log(e))),n.push(this.username),console.log(this.meetings)},removeMeetingParticipant(e){N.Z["delete"]("/api/meetings/"+e.id+"/participants/"+this.username).then((e=>console.log("Usunięto uczestnika ze spotkania"))).catch((e=>console.log(e))),e.participants.splice(e.participants.indexOf(this.username),1)},deleteMeeting(e){N.Z["delete"]("/api/meetings/"+e.id).then((e=>console.log("Usunięto spotkanie"))).catch((e=>console.log(e))),this.meetings.splice(this.meetings.indexOf(e),1),this.error=!1}}},A=S;var L=(0,c.Z)(A,w,b,!1,null,"ce6d7018",null);const C=L.exports,F={components:{LoginForm:g,MeetingsPage:C,UserPanel:_},data(){return{signingUp:!1,authenticatedUsername:"",isError:!1,message:""}},mounted(){const e=localStorage.getItem("username"),t=localStorage.getItem("token");e&&t&&(this.storeAuth(e,t),N.Z.get("/api/meetings").catch((()=>this.logMeOut())))},methods:{register(e){this.clearMessage(),null!=e.login&&null==e.password?this.failure("Hasło musi zostać ustawione."):N.Z.post("/api/participants",e).then((()=>{this.success("Konto zostało założone. Możesz się zalogować."),this.signingUp=!1})).catch((e=>this.failure(`Błąd przy zakładaniu konta. Kod odpowiedzi: ${e.response.status}`)))},logMeIn(e){this.clearMessage(),N.Z.post("/api/tokens",e).then((t=>{const n=t.data.token;this.storeAuth(e.login,n)})).catch((()=>this.failure("Logowanie nieudane.")))},logMeOut(){this.authenticatedUsername="",delete N.Z.defaults.headers.common.Authorization,localStorage.clear()},storeAuth(e,t){this.authenticatedUsername=e,N.Z.defaults.headers.common.Authorization="Bearer "+t,localStorage.setItem("username",e),localStorage.setItem("token",t)},success(e){this.message=e,this.isError=!1},failure(e){this.message=e,this.isError=!0},clearMessage(){this.message=void 0}}},I=F;var T=(0,c.Z)(I,s,a,!1,null,"2b89eef3",null);const D=T.exports;new i.ZP({render:e=>e(D)}).$mount("#app")}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}n.m=e,(()=>{var e=[];n.O=(t,i,s,a)=>{if(!i){var o=1/0;for(c=0;c<e.length;c++){for(var[i,s,a]=e[c],r=!0,l=0;l<i.length;l++)(!1&a||o>=a)&&Object.keys(n.O).every((e=>n.O[e](i[l])))?i.splice(l--,1):(r=!1,a<o&&(o=a));if(r){e.splice(c--,1);var u=s();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[i,s,a]}})(),(()=>{n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={143:0};n.O.j=t=>0===e[t];var t=(t,i)=>{var s,a,[o,r,l]=i,u=0;if(o.some((t=>0!==e[t]))){for(s in r)n.o(r,s)&&(n.m[s]=r[s]);if(l)var c=l(n)}for(t&&t(i);u<o.length;u++)a=o[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},i=self["webpackChunkvue_starter"]=self["webpackChunkvue_starter"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var i=n.O(void 0,[998],(()=>n(744)));i=n.O(i)})();
//# sourceMappingURL=app.a21181ee.js.map